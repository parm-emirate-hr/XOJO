<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Frameset//EN" >
<HTML>
<HEAD>
<TITLE>Monkeybread Xojo plugin - NSURLSessionWebSocketTaskMBS class</TITLE>
<script src="../platforms.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../help.css" >
<link rel="stylesheet" type="text/css" href="../screen.css" media="screen">
<link rel="stylesheet" type="text/css" href="../print.css" media="print">
<link rel="stylesheet" type="text/css" href="../allitems.css" title="Default">
<link rel="alternate stylesheet" type="text/css" href="../macitems.css" title="Mac">
<link rel="alternate stylesheet" type="text/css" href="../winitems.css" title="Win">
<link rel="alternate stylesheet" type="text/css" href="../linuxitems.css" title="Linux">
<link rel="alternate stylesheet" type="text/css" href="../crossitems.css" title="Crossplatform">
<meta http-equiv="content-type" content="text/html; charset=x-mac-roman">
<META NAME="description" CONTENT="NSURLSessionWebSocketTaskMBS">
</head>
<BODY BGCOLOR="#FFFFFF">
<H2 lang="en">NSURLSessionWebSocketTaskMBS class</h2>
<p><a href="http://www.monkeybreadsoftware.net">Online Documentation</a> &nbsp; - &nbsp; <a href="stats.html">Statistics</a> &nbsp; - &nbsp; <a href="topic-faq.html">FAQ</a> &nbsp; - &nbsp; <a href="parts.html">Plugin Parts</a> (<a href="partsall.html">All</a>, <a href="plugindeps.html">Dependencies</a>) &nbsp; - &nbsp; <a href="hierarchy.html">Class hierarchy</a></p>
<p>New in Version 
<a href="newinversion213.html">21.3</a> 
<a href="newinversion214.html">21.4</a> 
<a href="newinversion215.html">21.5</a> 
<a href="newinversion220.html">22.0</a> 
<a href="newinversion221.html">22.1</a> 
<a href="newinversion222.html">22.2</a> 
<a href="newinversion223.html">22.3</a> 
<a href="newinversion224.html">22.4</a> 
<a href="newinversion225.html">22.5</a> 
<a href="newinversion230.html">23.0</a> 
<a href="newinversion231.html">23.1</a> 
<a href="newinversion232.html">23.2</a> 
</p>
<p>The list of the &nbsp; <a href="themes.html">topics</a>, 
 &nbsp; <a href="classes.html">classes</a>,
 &nbsp; <a href="interfaces.html">interfaces</a>,
 &nbsp; <a href="controls.html">controls</a>,
 &nbsp; <a href="modules.html">modules</a>,
 &nbsp; <a href="globaltopic.html">global methods by category</a>,
 &nbsp; <a href="globalname.html">global methods by name</a>,
 &nbsp; <a href="screenshots.html">screenshots</a>,
 &nbsp; <a href="licenses.html">licenses</a> &nbsp;
 and &nbsp; <a href="examples.html">examples</a>.</p>
<p id=PlatformChooserMBS>Platforms to show: <a class="isA" href="javascript:all();">All</a> <a class="isM" href="javascript:mac();">Mac</a> <a class="isW" href="javascript:win();">Windows</a> <a class="isL" href="javascript:linux();">Linux</a> <a class="isC" href="javascript:crossplatform();">Cross-Platform</a></p>
<H3>NSURLSessionWebSocketTaskMBS class</H3>
<P>Super class: <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A></p>
<div class="M">

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>class</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
A WebSocket task can be created with a ws or wss url. <BR>
<B>Notes:</B> 
<BR>
A client can also provide a list of protocols it wishes to advertise during the WebSocket handshake phase.<BR>
Once the handshake is successfully completed the client will be notified through an optional delegate.<BR>
All reads and writes enqueued before the completion of the handshake will be queued up and executed once the hanshake succeeds. Before the handshake completes, the client can be called to handle redirection or authentication using the same delegates as NSURLSessionTask. WebSocket task will also provide support for cookies and will store cookies to the cookie storage on the session and will attach cookies to outgoing HTTP handshake requests.<BR>
<BR>
Available on MacOS 10.15 or newer.<BR>
Subclass of the <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A> class.<BR>
This is an abstract class. You can&#39;t create an instance, but you can get one from various plugin functions.<BR>
</div>
<ul>
<LI>3 properties<UL>
<li class="M">property <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-property.html">closeCode</A> as Integer</li>
<li class="M">property <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-property.html#2">closeReason</A> as MemoryBlock</li>
<li class="M">property <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-property.html#3">maximumMessageSize</A> as Integer</li>
</UL></LI>
<LI>5 methods<UL>
<li class="M">method <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-method.html">cancel</A>(closeCode as Integer, reason as MemoryBlock)</li>
<li class="M">method <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-method.html#2">Constructor</A> &nbsp; <b style="color: #8B0000"> Private </b></li>
<li class="M">method <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-method.html#3">receiveMessage</A>(Handler as <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettaskreceivemessagecompletedmbs.html">NSURLSessionWebSocketTaskReceiveMessageCompletedMBS</A>, tag as variant = nil)</li>
<li class="M">method <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-method.html#4">sendMessage</A>(message as <A href="class-nsurlsessionwebsocketmessagembs.html">NSURLSessionWebSocketMessageMBS</A>, Handler as <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettasksendmessagecompletedmbs.html">NSURLSessionWebSocketTaskSendMessageCompletedMBS</A>, tag as variant = nil)</li>
<li class="M">method <A href="cocoanetworking-nsurlsessionwebsockettaskmbs-method.html#5">sendPing</A>(Handler as <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettasksendpingwithpongreceivedmbs.html">NSURLSessionWebSocketTaskSendPingWithPongReceivedMBS</A>, tag as variant = nil)</li>
</UL></LI>
<LI>3 delegates<UL>
<li class="M">delegate <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettaskreceivemessagecompletedmbs.html">NSURLSessionWebSocketTaskReceiveMessageCompletedMBS</A>(webSocketTask as NSURLSessionWebSocketTaskMBS, message as <A href="class-nsurlsessionwebsocketmessagembs.html">NSURLSessionWebSocketMessageMBS</A>, error as <A href="class-nserrormbs.html">NSErrorMBS</A>, tag as variant)</li>
<li class="M">delegate <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettasksendmessagecompletedmbs.html">NSURLSessionWebSocketTaskSendMessageCompletedMBS</A>(webSocketTask as NSURLSessionWebSocketTaskMBS, error as <A href="class-nserrormbs.html">NSErrorMBS</A>, tag as variant)</li>
<li class="M">delegate <A href="delegate-nsurlsessionwebsockettaskmbs-nsurlsessionwebsockettasksendpingwithpongreceivedmbs.html">NSURLSessionWebSocketTaskSendPingWithPongReceivedMBS</A>(webSocketTask as NSURLSessionWebSocketTaskMBS, error as <A href="class-nserrormbs.html">NSErrorMBS</A>, tag as variant)</li>
</UL></LI>
<LI>13 constants<UL>
</UL></LI>
</ul>
<h3 lang="en">Close Codes</h3>
<table cellpadding=2 cellspacing=2>
<tr>
<th bgcolor="#DDDDDD">Constant</th>
<th bgcolor="#DDDDDD">Value</th>
<th bgcolor="#DDDDDD">Description</th>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html">CloseCodeAbnormalClosure </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1006</td>
<td bgcolor="#DDDDDD" valign=top>
Abnormal Closure<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#2">CloseCodeGoingAway </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1001</td>
<td bgcolor="#DDDDDD" valign=top>
Going Away<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#3">CloseCodeInternalServerError </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1011</td>
<td bgcolor="#DDDDDD" valign=top>
Internal Server Error<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#4">CloseCodeInvalid </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 0</td>
<td bgcolor="#DDDDDD" valign=top>
Invalid<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#5">CloseCodeInvalidFramePayloadData </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1007</td>
<td bgcolor="#DDDDDD" valign=top>
Invalid Frame Payload Data<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#6">CloseCodeMandatoryExtensionMissing </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1010</td>
<td bgcolor="#DDDDDD" valign=top>
Mandatory Extension Missing<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#7">CloseCodeMessageTooBig </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1009</td>
<td bgcolor="#DDDDDD" valign=top>
Message Too Big<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#8">CloseCodeNormalClosure </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1000</td>
<td bgcolor="#DDDDDD" valign=top>
Normal Closure<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#9">CloseCodeNoStatusReceived </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1005</td>
<td bgcolor="#DDDDDD" valign=top>
No Status Received<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#10">CloseCodePolicyViolation </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1008</td>
<td bgcolor="#DDDDDD" valign=top>
Policy Violation<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#11">CloseCodeProtocolError </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1002</td>
<td bgcolor="#DDDDDD" valign=top>
Protocol Error<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#12">CloseCodeTLSHandshakeFailure </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1015</td>
<td bgcolor="#DDDDDD" valign=top>
TLS Handshake Failure<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessionwebsockettaskmbs-const.html#13">CloseCodeUnsupportedData </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1003</td>
<td bgcolor="#DDDDDD" valign=top>
Unsupported Data<BR>
</td>
</tr>
</table>
<h4>Super class <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A></h4>
<ul>
<LI>17 properties<UL>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html">countOfBytesClientExpectsToReceive</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#2">countOfBytesClientExpectsToSend</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#3">countOfBytesExpectedToReceive</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#4">countOfBytesExpectedToSend</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#5">countOfBytesReceived</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#6">countOfBytesSent</A> as Int64</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#7">currentRequest</A> as <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A></li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#8">earliestBeginDate</A> as Date</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#9">earliestBeginDateTime</A> as DateTime</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#10">error</A> as <A href="class-nserrormbs.html">NSErrorMBS</A></li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#11">Handle</A> as Integer</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#12">originalRequest</A> as <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A></li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#13">Priority</A> as Single</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#14">response</A> as <A href="class-nsurlresponsembs.html">NSURLResponseMBS</A></li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#15">state</A> as Integer</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#16">taskDescription</A> as String</li>
<li class="M">property <A href="cocoanetworking-nsurlsessiontaskmbs-property.html#17">taskIdentifier</A> as UInt64</li>
</UL></LI>
<LI>5 methods<UL>
<li class="M">method <A href="cocoanetworking-nsurlsessiontaskmbs-method.html">Cancel</A></li>
<li class="M">method <A href="cocoanetworking-nsurlsessiontaskmbs-method.html#2">Constructor</A> &nbsp; <b style="color: #8B0000"> Private </b></li>
<li class="M">method <A href="cocoanetworking-nsurlsessiontaskmbs-method.html#3">copy</A> as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A></li>
<li class="M">method <A href="cocoanetworking-nsurlsessiontaskmbs-method.html#4">resume</A></li>
<li class="M">method <A href="cocoanetworking-nsurlsessiontaskmbs-method.html#5">suspend</A></li>
</UL></LI>
<LI>4 shared methods<UL>
<li class="M">shared method <A href="cocoanetworking-nsurlsessiontaskmbs-shared-method.html">available</A> as Boolean</li>
<li class="M">shared method <A href="cocoanetworking-nsurlsessiontaskmbs-shared-method.html#2">PriorityDefault</A> as Single</li>
<li class="M">shared method <A href="cocoanetworking-nsurlsessiontaskmbs-shared-method.html#3">PriorityHigh</A> as Single</li>
<li class="M">shared method <A href="cocoanetworking-nsurlsessiontaskmbs-shared-method.html#4">PriorityLow</A> as Single</li>
</UL></LI>
<LI>4 constants<UL>
</UL></LI>
</ul>
<h3 lang="en">States</h3>
<table cellpadding=2 cellspacing=2>
<tr>
<th bgcolor="#DDDDDD">Constant</th>
<th bgcolor="#DDDDDD">Value</th>
<th bgcolor="#DDDDDD">Description</th>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessiontaskmbs-const.html">StateCanceling </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 2</td>
<td bgcolor="#DDDDDD" valign=top>
The task has received a cancel message.<BR>
The delegate may or may not have received a taskDidCompleteWithError message yet. A task in this state is not subject to timeouts.<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessiontaskmbs-const.html#2">StateCompleted </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 3</td>
<td bgcolor="#DDDDDD" valign=top>
The task has completed (without being canceled), and the task&#39;s delegate receives no further callbacks.<BR>
If the task completed successfully, the task&rsquo;s error property is nil. Otherwise, it provides an error object that tells what went wrong. A task in this state is not subject to timeouts.<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessiontaskmbs-const.html#3">StateRunning </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 0</td>
<td bgcolor="#DDDDDD" valign=top>
The task is currently being serviced by the session.<BR>
A task in this state is subject to the request and resource timeouts specified in the session configuration object.<BR>
</td>
</tr>
<tr class="M">
<td bgcolor="#DDDDDD" valign=top><a href="cocoanetworking-nsurlsessiontaskmbs-const.html#4">StateSuspended </a></td>
<td bgcolor="#DDDDDD" valign=top align=Right> 1</td>
<td bgcolor="#DDDDDD" valign=top>
The task was suspended by the app.<BR>
No further processing takes place until the task is resumed. A task in this state is not subject to timeouts.<BR>
</td>
</tr>
</table>
<p>This class has no sub classes.</p>
<h4>Some methods using this class:</h4><ul>
<li class="M"><A href="cocoanetworking-nsurlsessionmbs-method.html#25" translate="no">NSURLSessionMBS.webSocketTaskWithRequest</A>(request as <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A>) as NSURLSessionWebSocketTaskMBS</li>
<li class="M"><A href="cocoanetworking-nsurlsessionmbs-method.html#26" translate="no">NSURLSessionMBS.webSocketTaskWithURL</A>(URL as String) as NSURLSessionWebSocketTaskMBS</li>
<li class="M"><A href="cocoanetworking-nsurlsessionmbs-method.html#27" translate="no">NSURLSessionMBS.webSocketTaskWithURL</A>(URL as String, Protocols() as String) as NSURLSessionWebSocketTaskMBS</li>
</ul>
<h4>Some events using this class:</h4><ul>
<li class="M"><A href="cocoanetworking-nsurlsessionmbs-event.html#20">NSURLSessionMBS.webSocketTaskDidCloseWithCode</A>(webSocketTask as NSURLSessionWebSocketTaskMBS, closeCode as Integer, reason as MemoryBlock)</li>
<li class="M"><A href="cocoanetworking-nsurlsessionmbs-event.html#21">NSURLSessionMBS.webSocketTaskDidOpenWithProtocol</A>(webSocketTask as NSURLSessionWebSocketTaskMBS, protocol as String)</li>
</ul>
<h4>Blog Entries</h4>
<ul>
<li><a href="https://www.mbsplugins.de/archive/2020-04-15/Adding_NSURLSession_classes_fo/monkeybreadsoftware_blog_xojo">Adding NSURLSession classes for Xojo</a></li>
</ul>
<BR>
<p>The items on this page are in the following plugins: <a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a>.</p>
<br clear=all><p>
<a href="class-nsurlsessionwebsocketmessagembs.html">NSURLSessionWebSocketMessageMBS</a>
 &nbsp; - &nbsp; 
<a href="class-nsuserapplescripttaskmbs.html">NSUserAppleScriptTaskMBS</a>
</p>
<!-- Ende Content-->

<br>
<div style="width: 200pt; margin: 0pt; padding: 5pt; border-color:#ccc; border-style:solid; background-color: #eee; border-width: 2pt; border-radius: 10pt; " lang="en">
&#128172; <a href="https://www.monkeybreadsoftware.com/feedback/?what=xojo&path=class-nsurlsessionwebsockettaskmbs">Ask a question or report a problem</a>
</div>

</BODY>
</HTML>

