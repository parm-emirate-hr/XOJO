<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Frameset//EN" >
<HTML>
<HEAD>
<TITLE>Monkeybread Xojo plugin - NSURLSessionMBS events</TITLE>
<script src="../platforms.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../help.css" >
<link rel="stylesheet" type="text/css" href="../screen.css" media="screen">
<link rel="stylesheet" type="text/css" href="../print.css" media="print">
<link rel="stylesheet" type="text/css" href="../allitems.css" title="Default">
<link rel="alternate stylesheet" type="text/css" href="../macitems.css" title="Mac">
<link rel="alternate stylesheet" type="text/css" href="../winitems.css" title="Win">
<link rel="alternate stylesheet" type="text/css" href="../linuxitems.css" title="Linux">
<link rel="alternate stylesheet" type="text/css" href="../crossitems.css" title="Crossplatform">
<meta http-equiv="content-type" content="text/html; charset=x-mac-roman">
<META NAME="description" CONTENT="NSURLSessionMBS">
</head>
<BODY BGCOLOR="#FFFFFF">
<H2 lang="en">NSURLSessionMBS events</h2>
<p><a href="http://www.monkeybreadsoftware.net">Online Documentation</a> &nbsp; - &nbsp; <a href="stats.html">Statistics</a> &nbsp; - &nbsp; <a href="topic-faq.html">FAQ</a> &nbsp; - &nbsp; <a href="parts.html">Plugin Parts</a> (<a href="partsall.html">All</a>, <a href="plugindeps.html">Dependencies</a>) &nbsp; - &nbsp; <a href="hierarchy.html">Class hierarchy</a></p>
<p>New in Version 
<a href="newinversion213.html">21.3</a> 
<a href="newinversion214.html">21.4</a> 
<a href="newinversion215.html">21.5</a> 
<a href="newinversion220.html">22.0</a> 
<a href="newinversion221.html">22.1</a> 
<a href="newinversion222.html">22.2</a> 
<a href="newinversion223.html">22.3</a> 
<a href="newinversion224.html">22.4</a> 
<a href="newinversion225.html">22.5</a> 
<a href="newinversion230.html">23.0</a> 
<a href="newinversion231.html">23.1</a> 
<a href="newinversion232.html">23.2</a> 
</p>
<p>The list of the &nbsp; <a href="themes.html">topics</a>, 
 &nbsp; <a href="classes.html">classes</a>,
 &nbsp; <a href="interfaces.html">interfaces</a>,
 &nbsp; <a href="controls.html">controls</a>,
 &nbsp; <a href="modules.html">modules</a>,
 &nbsp; <a href="globaltopic.html">global methods by category</a>,
 &nbsp; <a href="globalname.html">global methods by name</a>,
 &nbsp; <a href="screenshots.html">screenshots</a>,
 &nbsp; <a href="licenses.html">licenses</a> &nbsp;
 and &nbsp; <a href="examples.html">examples</a>.</p>
<p id=PlatformChooserMBS>Platforms to show: <a class="isA" href="javascript:all();">All</a> <a class="isM" href="javascript:mac();">Mac</a> <a class="isW" href="javascript:win();">Windows</a> <a class="isL" href="javascript:linux();">Linux</a> <a class="isC" href="javascript:crossplatform();">Cross-Platform</a></p>
<p>Back to <A href="class-nsurlsessionmbs.html">NSURLSessionMBS</a> class.  </p>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="1">dataTaskDidBecomeDownloadTask(dataTask as <A href="class-nsurlsessiondatataskmbs.html">NSURLSessionDataTaskMBS</A>, downloadTask as <A href="class-nsurlsessiondownloadtaskmbs.html">NSURLSessionDownloadTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The data task was changed to a download task.<BR>
<B>Notes:</B> 
<BR>
dataTask: The data task that was replaced by a download task.<BR>
downloadTask: The new download task that replaced the data task.<BR>
<BR>
When your dataTaskDidReceiveResponse event uses the ResponseBecomeDownload disposition to convert the request to use a download, the session calls this event to provide you with the new download task. After this call, the session receives no further event calls related to the original data task.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="2">dataTaskDidBecomeStreamTask(dataTask as <A href="class-nsurlsessiondatataskmbs.html">NSURLSessionDataTaskMBS</A>, downloadTask as <A href="class-nsurlsessionstreamtaskmbs.html">NSURLSessionStreamTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The data task was changed to a stream task.<BR>
<B>Notes:</B> 
<BR>
dataTask: The data task that was replaced by a stream task.<BR>
streamTask: The new stream task that replaced the data task.<BR>
<BR>
When your dataTaskDidReceiveResponse event uses the ResponseBecomeStream disposition to convert the request to use a stream, the session calls this event to provide you with the new stream task. After this call, the session receives no further event calls related to the original data task.<BR>
<BR>
For requests that were pipelined, the stream task allows only reading, and the object immediately sends the delegate message writeClosedForStreamTask. You can disable pipelining for all requests in a session by setting the HTTPShouldUsePipelining property on its <A href="class-nsurlsessionconfigurationmbs.html">NSURLSessionConfigurationMBS</A> object, or for individual requests by setting the HTTPShouldUsePipelining property on an <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A> object.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="3">dataTaskDidReceiveData(dataTask as <A href="class-nsurlsessiondatataskmbs.html">NSURLSessionDataTaskMBS</A>, data as MemoryBlock)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The data task has received some of the expected data.<BR>
<B>Notes:</B> 
<BR>
dataTask: The data task that provided data.<BR>
data: A data object containing the transferred data.<BR>
<BR>
This event may be called more than once, and each call provides only data received since the previous call. The app is responsible for accumulating this data if needed.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="4">dataTaskDidReceiveResponse(dataTask as <A href="class-nsurlsessiondatataskmbs.html">NSURLSessionDataTaskMBS</A>, response as <A href="class-nsurlresponsembs.html">NSURLResponseMBS</A>) as Integer</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The data task received the initial reply (headers) from the server.<BR>
<B>Notes:</B> 
<BR>
dataTask: <BR>
<BR>
The data task that received an initial reply.<BR>
response: A URL response object populated with headers.<BR>
<BR>
Return your decision whether to continue a transfer, passing a NSURLSessionResponseDisposition constant to indicate whether the transfer should continue as a data task or should become a download task.<BR>
<BR>
<UL><LI>
If you pass ResponseAllow, the task continues as a data task.
</LI><LI>
If you pass ResponseCancel, the task is canceled.
</LI><LI>
If you pass ResponseBecomeDownload, your delegate&rsquo;s dataTaskDidBecomeDownloadTask method is called to provide the new download task that supersedes the current task.
</LI></UL>
<BR>
Implementing this method is optional unless you need to cancel the transfer or convert it to a download task when the response headers are first received. If you don&rsquo;t provide this event, the session always allows the task to continue.<BR>
You also implement this method if you need to support the fairly obscure multipart/x-mixed-replace content type. With that content type, the server sends a series of parts, each of which is intended to replace the previous part. The session calls this method at the beginning of each part, followed by one or more calls to dataTaskDidReceiveData with the contents of that part.<BR>
<BR>
Each time the dataTaskDidReceiveResponse method is called for a part, collect the data received for the previous part (if any) and process the data as needed for your application. This processing can include storing the data to the filesystem, parsing it into custom types, or displaying it to the user. Next, begin receiving the next part by calling the completion handler with the NSURLSessionResponseAllow constant. Finally, if you have also implemented taskDidCompleteWithError, the session will call it after sending all the data for the last part.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="5">dataTaskWillCacheResponse(dataTask as <A href="class-nsurlsessiondatataskmbs.html">NSURLSessionDataTaskMBS</A>, proposedResponse as <A href="class-nscachedurlresponsembs.html">NSCachedURLResponseMBS</A>) as <A href="class-nscachedurlresponsembs.html">NSCachedURLResponseMBS</A></A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
Asks the event whether the data (or upload) task should store the response in the cache.<BR>
<B>Notes:</B> 
<BR>
dataTask: The data (or upload) task.<BR>
proposedResponse: The default caching behavior. This behavior is determined based on the current caching policy and the values of certain received headers, such as the Pragma and Cache-Control headers.<BR>
<BR>
Please return the new respnose:<BR>
<BR>
Provide either the original proposed response, a modified version of that response, or nil to prevent caching the response. <BR>
<BR>
The session calls this event after the task finishes receiving all of the expected data. If you don&rsquo;t implement this method, the default behavior is to use the caching policy specified in the session&rsquo;s configuration object. The primary purpose of this method is to prevent caching of specific URLs or to modify the userInfo dictionary associated with the URL response.<BR>
<BR>
This method is called only if the NSURLProtocol handling the request decides to cache the response. As a rule, responses are cached only when all of the following are true:<BR>
<BR>
<UL><LI>
The request is for an HTTP or HTTPS URL (or your own custom networking protocol that supports caching).
</LI><LI>
The request was successful (with a status code in the 200&ndash;299 range).
</LI><LI>
The provided response came from the server, rather than out of the cache.
</LI><LI>
The session configuration&rsquo;s cache policy allows caching.
</LI><LI>
The provided <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A> object&#39;s cache policy (if applicable) allows caching.
</LI><LI>
The cache-related headers in the server&rsquo;s response (if present) allow caching.
</LI><LI>
The response size is small enough to reasonably fit within the cache. (For example, if you provide a disk cache, the response must be no larger than about 5% of the disk cache size.)
</UL>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="6">didBecomeInvalid(error as <A href="class-nserrormbs.html">NSErrorMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
Tells the URL session that the session has been invalidated.<BR>
<B>Notes:</B> 
<BR>
error: The error that caused invalidation, or nil if the invalidation was explicit.<BR>
<BR>
If you invalidate a session by calling its finishTasksAndInvalidate method, the session waits until after the final task in the session finishes or fails before calling this event. If you call the invalidateAndCancel method, the session calls this event immediately.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="7">didReceiveChallenge(challenge as <A href="class-nsurlauthenticationchallengembs.html">NSURLAuthenticationChallengeMBS</A>, byref disposition as Integer, byref credential as <A href="class-nsurlcredentialmbs.html">NSURLCredentialMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
Requests credentials from the delegate in response to a session-level authentication request from the remote server.<BR>
<B>Notes:</B> 
<BR>
session: The session containing the task that requested authentication.<BR>
challenge: An object that contains the request for authentication.<BR>
<BR>
disposition&mdash;One of several constants that describes how the challenge should be handled.<BR>
credential&mdash;The credential that should be used for authentication if disposition is NSURLSessionAuthChallengeUseCredential, otherwise nil.<BR>
<BR>
This method is called in two situations:<BR>
<UL><LI>
When a remote server asks for client certificates or Windows NT LAN Manager (NTLM) authentication, to allow your app to provide appropriate credentials
</LI><LI>
When a session first establishes a connection to a remote server that uses SSL or TLS, to allow your app to verify the server&rsquo;s certificate chain
</LI></UL>
<BR>
If you do not implement this event, the session calls its delegate&rsquo;s taskDidReceiveChallenge method instead.<BR>
Note<BR>
This method handles only the NSURLAuthenticationMethodNTLM, NSURLAuthenticationMethodNegotiate, NSURLAuthenticationMethodClientCertificate, and NSURLAuthenticationMethodServerTrust authentication types. For all other authentication schemes, the session calls only the taskDidReceiveChallenge method.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="8">downloadTaskDidFinishDownloadingToURL(downloadTask as <A href="class-nsurlsessiondownloadtaskmbs.html">NSURLSessionDownloadTaskMBS</A>, location as String, file as FolderItem)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
A download task has finished downloading.<BR>
<B>Notes:</B> 
<BR>
downloadTask: The download task that finished.<BR>
location: A file URL for the temporary file. Because the file is temporary, you must either open the file for reading or move it to a permanent location in your app&rsquo;s sandbox container directory before returning from this event.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="9">downloadTaskDidResumeAtOffset(downloadTask as <A href="class-nsurlsessiondownloadtaskmbs.html">NSURLSessionDownloadTaskMBS</A>, fileOffset as Int64, expectedTotalBytes as Int64)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The download task has resumed downloading.<BR>
<B>Notes:</B> 
<BR>
downloadTask: The download task that resumed. See explanation in the discussion.<BR>
fileOffset: If the file&#39;s cache policy or last modified date prevents reuse of the existing content, then this value is zero. Otherwise, this value is an integer representing the number of bytes on disk that do not need to be retrieved again.<BR>
<BR>
In some situations, it may be possible for the transfer to resume earlier in the file than where the previous transfer ended.<BR>
expectedTotalBytes: The expected length of the file, as provided by the Content-Length header. If this header was not provided, the value is NSURLSessionTransferSizeUnknown (-1).<BR>
<BR>
If a resumable download task is canceled or fails, you can request a resumeData object that provides enough information to restart the download in the future. Later, you can call downloadTaskWithResumeData with that data.<BR>
<BR>
When you call those methods, you get a new download task. As soon as you resume that task, the session calls this method with that new task to indicate that the download is resumed.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="10">downloadTaskDidWriteData(downloadTask as <A href="class-nsurlsessiondownloadtaskmbs.html">NSURLSessionDownloadTaskMBS</A>, bytesWritten as Int64, totalBytesWritten as Int64, totalBytesExpectedToWrite as Int64)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
Periodically informs the delegate about the download&rsquo;s progress.<BR>
<B>Notes:</B> 
<BR>
downloadTask: The download task.<BR>
bytesWritten: The number of bytes transferred since the last time this event was called.<BR>
totalBytesWritten: The total number of bytes transferred so far.<BR>
totalBytesExpectedToWrite: The expected length of the file, as provided by the Content-Length header. If this header was not provided, the value is NSURLSessionTransferSizeUnknown (-1).<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="11">streamTaskBetterRouteDiscoveredForStreamTask(streamTask as <A href="class-nsurlsessionstreamtaskmbs.html">NSURLSessionStreamTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
A better route to the host has been detected for the stream.<BR>
<B>Notes:</B> 
<BR>
streamTask: The stream task that discovered a better route.<BR>
<BR>
This method is called when the URL loading system determines that a better route to the endpoint host is available. For example, this method may be called when a Wi-Fi interface becomes available.<BR>
You should consider completing pending work and creating a new stream task in order to take advantage of better routes when they become available.<BR>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="12">streamTaskDidBecomeInputStream(streamTask as <A href="class-nsurlsessionstreamtaskmbs.html">NSURLSessionStreamTaskMBS</A>, inputStream as <A href="class-nsinputstreammbs.html">NSInputStreamMBS</A>, outputStream as <A href="class-nsoutputstreammbs.html">NSOutputStreamMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The stream task has been completed as a result of the stream task calling the captureStreams method.<BR>
<B>Notes:</B> 
<BR>
streamTask: The stream task that has been completed.<BR>
inputStream: The created input stream. This NSInputStream object is unopened.<BR>
outputStream: The created output stream. This NSOutputStream object is unopened<BR>
<BR>
This event will only be called after all enqueued reads and writes for the stream task have been completed.<BR>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="13">streamTaskReadClosedForStreamTask(streamTask as <A href="class-nsurlsessionstreamtaskmbs.html">NSURLSessionStreamTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The read side of the underlying socket has been closed.<BR>
<B>Notes:</B> 
<BR>
streamTask: The stream task that closed reads.<BR>
<BR>
This method may be called even if no reads are currently in progress. This method does not indicate that the stream reached end-of-file (EOF), such that no more data can be read.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="14">streamTaskWriteClosedForStreamTask(streamTask as <A href="class-nsurlsessionstreamtaskmbs.html">NSURLSessionStreamTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The write side of the underlying socket has been closed.<BR>
<B>Notes:</B> 
<BR>
streamTask: The stream task that closed writes.<BR>
<BR>
This method may be called even if no writes are currently in progress.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="15">taskDidCompleteWithError(task as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A>, error as <A href="class-nserrormbs.html">NSErrorMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The task finished transferring data.<BR>
<B>Notes:</B> 
<BR>
task: The task whose request finished transferring data.<BR>
error: If an error occurred, an error object indicating how the transfer failed, otherwise nil.<BR>
<BR>
Server errors are not reported through the error parameter. The only errors your delegate receives through the error parameter are client-side errors, such as being unable to resolve the hostname or connect to the host.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="16">taskDidFinishCollectingMetrics(task as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A>, metrics as <A href="class-nsurlsessiontaskmetricsmbs.html">NSURLSessionTaskMetricsMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The session finished collecting metrics for the task.<BR>
<B>Notes:</B> 
<BR>
task: The task whose metrics have been collected.<BR>
metrics: The collected metrics.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="17">taskDidSendBodyData(task as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A>, bytesSent as Int64, totalBytesSent as Int64, totalBytesExpectedToSend as Integer)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
Periodically informs the delegate of the progress of sending body content to the server.<BR>
<B>Notes:</B> 
<BR>
task: The data task.<BR>
bytesSent: The number of bytes sent since the last time this event was called.<BR>
totalBytesSent: The total number of bytes sent so far.<BR>
totalBytesExpectedToSend: The expected length of the body data. The URL loading system can determine the length of the upload data in three ways:<BR>
<UL><LI>
From the length of the NSData object provided as the upload body.
</LI><LI>
From the length of the file on disk provided as the upload body of an upload task (not a download task).
</LI><LI>
From the Content-Length in the request object, if you explicitly set it.
</LI></UL>
Otherwise, the value is NSURLSessionTransferSizeUnknown (-1) if you provided a stream or body data object, or zero (0) if you did not.<BR>
<BR>
The totalBytesSent and totalBytesExpectedToSend parameters are also available as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A> properties countOfBytesSent and countOfBytesExpectedToSend. <BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="18">taskIsWaitingForConnectivity(task as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The task is waiting until suitable connectivity is available before beginning the network load.<BR>
<B>Notes:</B> 
<BR>
task: The task that is waiting for a change in connectivity.<BR>
<BR>
This method is called if the waitsForConnectivity property of <A href="class-nsurlsessionconfigurationmbs.html">NSURLSessionConfigurationMBS</A> is true, and sufficient connectivity is unavailable. The delegate can use this opportunity to update the user interface; for example, by presenting an offline mode or a cellular-only mode.<BR>
<BR>
This method is called, at most, once per task, and only if connectivity is initially unavailable. It is never called for background sessions because waitsForConnectivity is ignored for those sessions.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="19">taskWillPerformHTTPRedirection(task as <A href="class-nsurlsessiontaskmbs.html">NSURLSessionTaskMBS</A>, response as <A href="class-nsurlresponsembs.html">NSURLResponseMBS</A>, request as <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A>) as <A href="class-nsurlrequestmbs.html">NSURLRequestMBS</A></A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The remote server requested an HTTP redirect.<BR>
<B>Notes:</B> 
<BR>
task: The task whose request resulted in a redirect.<BR>
response: An object containing the server&rsquo;s response to the original request.<BR>
request: A URL request object filled out with the new location.<BR>
<BR>
Return either the value of the request parameter, a modified URL request object, or NULL to refuse the redirect and return the body of the redirect response.<BR>
<BR>
This method is called only for tasks in default and ephemeral sessions. Tasks in background sessions automatically follow redirects.<BR>
<h4>Some examples using this event:</h4>
<ul translate="no">
<li><A href="example-macframeworks-nsurlsessiontest.html">/MacFrameworks/NSURLSession Test</A></li>
</ul>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="20">webSocketTaskDidCloseWithCode(webSocketTask as <A href="class-nsurlsessionwebsockettaskmbs.html">NSURLSessionWebSocketTaskMBS</A>, closeCode as Integer, reason as MemoryBlock)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The WebSocket task received a close frame from the server endpoint, optionally including a close code and reason from the server.<BR>
<B>Notes:</B> 
<BR>
webSocketTask: The WebSocket task that closed.<BR>
closeCode: The close code provided by the server. If the close frame didn&rsquo;t include a close code, this value is 0.<BR>
reason: The close reason provided by the server. If the close frame didn&rsquo;t include a reason, this value is nil.<BR>
</div>
<div class="M">
<b><a href="class-nsurlsessionmbs.html">NSURLSessionMBS</a>.<A name="21">webSocketTaskDidOpenWithProtocol(webSocketTask as <A href="class-nsurlsessionwebsockettaskmbs.html">NSURLSessionWebSocketTaskMBS</A>, protocol as String)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>event</td>
<td class=grau><A href="topic-cocoanetworking.html" translate="no">Cocoa Networking</A></td>
<td class=grau><a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a></td>
<td class=grau><a href="newinversion202.shtml" class=version>20.2</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau>&#10060; No</td>
<td class=grau></td>
</tr>
</table>
<B>Function:</B> 
The WebSocket task successfully negotiated the handshake with the endpoint, indicating the negotiated protocol.<BR>
<B>Notes:</B> 
<BR>
webSocketTask: The WebSocket task that opened.<BR>
protocol: The protocol picked during the handshake phase. This parameter is nil if the server did not pick a protocol, or if the client did not advertise protocols when creating the task.<BR>
<BR>
If the handshake fails, the task doesn&rsquo;t call this event.<BR>
</div>
<p>The items on this page are in the following plugins: <a href="plugins-mbsmacframeworksplugin.html">MBS MacFrameworks Plugin</a>.</p>
<!-- Ende Content-->

<br>
<div style="width: 200pt; margin: 0pt; padding: 5pt; border-color:#ccc; border-style:solid; background-color: #eee; border-width: 2pt; border-radius: 10pt; " lang="en">
&#128172; <a href="https://www.monkeybreadsoftware.com/feedback/?what=xojo&path=cocoanetworking-nsurlsessionmbs-event">Ask a question or report a problem</a>
</div>

</BODY>
</HTML>

