<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Frameset//EN" >
<HTML>
<HEAD>
<TITLE>Monkeybread Xojo plugin - IMKernelInfo7MBS methods</TITLE>
<script src="../platforms.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../help.css" >
<link rel="stylesheet" type="text/css" href="../screen.css" media="screen">
<link rel="stylesheet" type="text/css" href="../print.css" media="print">
<link rel="stylesheet" type="text/css" href="../allitems.css" title="Default">
<link rel="alternate stylesheet" type="text/css" href="../macitems.css" title="Mac">
<link rel="alternate stylesheet" type="text/css" href="../winitems.css" title="Win">
<link rel="alternate stylesheet" type="text/css" href="../linuxitems.css" title="Linux">
<link rel="alternate stylesheet" type="text/css" href="../crossitems.css" title="Crossplatform">
<meta http-equiv="content-type" content="text/html; charset=x-mac-roman">
<META NAME="description" CONTENT="IMKernelInfo7MBS">
</head>
<BODY BGCOLOR="#FFFFFF">
<H2 lang="en">IMKernelInfo7MBS methods</h2>
<p><a href="http://www.monkeybreadsoftware.net">Online Documentation</a> &nbsp; - &nbsp; <a href="stats.html">Statistics</a> &nbsp; - &nbsp; <a href="topic-faq.html">FAQ</a> &nbsp; - &nbsp; <a href="parts.html">Plugin Parts</a> (<a href="partsall.html">All</a>, <a href="plugindeps.html">Dependencies</a>) &nbsp; - &nbsp; <a href="hierarchy.html">Class hierarchy</a></p>
<p>New in Version 
<a href="newinversion213.html">21.3</a> 
<a href="newinversion214.html">21.4</a> 
<a href="newinversion215.html">21.5</a> 
<a href="newinversion220.html">22.0</a> 
<a href="newinversion221.html">22.1</a> 
<a href="newinversion222.html">22.2</a> 
<a href="newinversion223.html">22.3</a> 
<a href="newinversion224.html">22.4</a> 
<a href="newinversion225.html">22.5</a> 
<a href="newinversion230.html">23.0</a> 
<a href="newinversion231.html">23.1</a> 
<a href="newinversion232.html">23.2</a> 
</p>
<p>The list of the &nbsp; <a href="themes.html">topics</a>, 
 &nbsp; <a href="classes.html">classes</a>,
 &nbsp; <a href="interfaces.html">interfaces</a>,
 &nbsp; <a href="controls.html">controls</a>,
 &nbsp; <a href="modules.html">modules</a>,
 &nbsp; <a href="globaltopic.html">global methods by category</a>,
 &nbsp; <a href="globalname.html">global methods by name</a>,
 &nbsp; <a href="screenshots.html">screenshots</a>,
 &nbsp; <a href="licenses.html">licenses</a> &nbsp;
 and &nbsp; <a href="examples.html">examples</a>.</p>
<p id=PlatformChooserMBS>Platforms to show: <a class="isA" href="javascript:all();">All</a> <a class="isM" href="javascript:mac();">Mac</a> <a class="isW" href="javascript:win();">Windows</a> <a class="isL" href="javascript:linux();">Linux</a> <a class="isC" href="javascript:crossplatform();">Cross-Platform</a></p>
<p>Back to <A href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a> class.  </p>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="1">Clone as <A href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</A></A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Clones the kernel info object.<BR>
<B>Notes:</B> 
Creates a new clone of the given Kernel List so that its can be modified without effecting the original. <BR>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="2">Constructor(KernelInfo as <A href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Creates a copy of the kernel.<BR>
<p>See also:<ul>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#3">Constructor(kernelString as String)</A></li>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#4">Constructor(Type as Integer, GeometryInfo as IMGeometryInfo7MBS)</A></li>
</ul></p>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="3">Constructor(kernelString as String)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Takes the given string (generally supplied by the user) and converts it into a Morphology/Convolution Kernel. <BR>
<B>Notes:</B> 
<BR>
This allows users to specify a kernel from a number of pre-defined kernels, or to fully specify their own kernel for a specific Convolution or Morphology Operation.<BR>
<BR>
The kernel so generated can be any rectangular array of floating point values (doubles) with the &#39;control point&#39; or &#39;pixel being affected&#39; anywhere within that array of values.<BR>
<BR>
Previously IM was restricted to a square of odd size using the exact center as origin, this is no longer the case, and any rectangular kernel with any value being declared the origin. This in turn allows the use of highly asymmetrical kernels.<BR>
<BR>
The floating point values in the kernel can also include a special value known as &#39;nan&#39; or &#39;not a number&#39; to indicate that this value is not part of the kernel array. This allows you to shaped the kernel within its rectangular area. That is &#39;nan&#39; values provide a &#39;mask&#39; for the kernel shape. However at least one non-nan value must be provided for correct working of a kernel.<BR>
<BR>
The returned kernel should be freed using the DestroyKernelInfo() when you are finished with it. Do not free this memory yourself.<BR>
<BR>
Input kernel defintion strings can consist of any of three types.<BR>
<BR>
&quot;name:args[[@&gt;&lt;]&quot; Select from one of the built in kernels, using the name and geometry arguments supplied. See AcquireKernelBuiltIn()<BR>
<BR>
&quot;WxH[+X+Y][@&gt;&lt;]:num, num, num ...&quot; a kernel of size W by H, with W*H floating point numbers following. the &#39;center&#39; can be optionally be defined at +X+Y (such that +0+0 is top left corner). If not defined the pixel in the center, for odd sizes, or to the immediate top or left of center for even sizes is automatically selected.<BR>
<BR>
&quot;num, num, num, num, ...&quot; list of floating point numbers defining an &#39;old style&#39; odd sized square kernel. At least 9 values should be provided for a 3x3 square kernel, 25 for a 5x5 square kernel, 49 for 7x7, etc. Values can be space or comma separated. This is not recommended.<BR>
<BR>
You can define a &#39;list of kernels&#39; which can be used by some morphology operators A list is defined as a semi-colon separated list kernels.<BR>
<BR>
&quot; kernel ; kernel ; kernel ; &quot;<BR>
<BR>
Any extra &#39;;&#39; characters, at start, end or between kernel defintions are simply ignored.<BR>
<BR>
The special flags will expand a single kernel, into a list of rotated kernels. A &#39;@&#39; flag will expand a 3x3 kernel into a list of 45-degree cyclic rotations, while a &#39;&gt;&#39; will generate a list of 90-degree rotations. The &#39;&lt;&#39; also exands using 90-degree rotates, but giving a 180-degree reflected kernel before the +/- 90-degree rotations, which can be important for Thinning operations.<BR>
<BR>
Note that &#39;name&#39; kernels will start with an alphabetic character while the new kernel specification has a &#39;:&#39; character in its specification string. If neither is the case, it is assumed an old style of a simple list of numbers generating a odd-sized square kernel has been given.<BR>
<BR>
kernelString: the Morphology/Convolution kernel wanted.<BR>
<BR>
See also AcquireKernelInfo in ImageMagick documentation.<BR>
<p>See also:<ul>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#2">Constructor(KernelInfo as IMKernelInfo7MBS)</A></li>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#4">Constructor(Type as Integer, GeometryInfo as IMGeometryInfo7MBS)</A></li>
</ul></p>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="4">Constructor(Type as Integer, GeometryInfo as <A href="class-imgeometryinfo7mbs.html">IMGeometryInfo7MBS</A>)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Returns one of the &#39;named&#39; built-in types of kernels used for special purposes such as gaussian blurring, skeleton pruning, and edge distance determination.<BR>
<B>Notes:</B> 
<BR>
They take a KernelType, and a set of geometry style arguments, which were typically decoded from a user supplied string, or from a more complex Morphology Method that was requested.<BR>
<BR>
A description of each parameter follows:<BR>
<BR>
type: the pre-defined type of kernel wanted<BR>
args: arguments defining or modifying the kernel<BR>
<BR>
Convolution Kernels<BR>
Unity The a No-Op or Scaling single element kernel.<BR>
Gaussian:{radius},{sigma} Generate a two-dimensional gaussian kernel, as used by -gaussian. The sigma for the curve is required. The resulting kernel is normalized,<BR>
If &#39;sigma&#39; is zero, you get a single pixel on a field of zeros.<BR>
NOTE: that the &#39;radius&#39; is optional, but if provided can limit (clip) the final size of the resulting kernel to a square 2*radius+1 in size. The radius should be at least 2 times that of the sigma value, or sever clipping and aliasing may result. If not given or set to 0 the radius will be determined so as to produce the best minimal error result, which is usally much larger than is normally needed.<BR>
LoG:{radius},{sigma} &quot;Laplacian of a Gaussian&quot; or &quot;Mexician Hat&quot; Kernel. The supposed ideal edge detection, zero-summing kernel.<BR>
An alturnative to this kernel is to use a &quot;DoG&quot; with a sigma ratio of approx 1.6 (according to wikipedia).<BR>
DoG:{radius},{sigma1},{sigma2} &quot;Difference of Gaussians&quot; Kernel. As &quot;Gaussian&quot; but with a gaussian produced by &#39;sigma2&#39; subtracted from the gaussian produced by &#39;sigma1&#39;. Typically sigma2 &gt; sigma1. The result is a zero-summing kernel.<BR>
Blur:{radius},{sigma}[,{angle}] Generates a 1 dimensional or linear gaussian blur, at the angle given (current restricted to orthogonal angles). If a &#39;radius&#39; is given the kernel is clipped to a width of 2*radius+1. Kernel can be rotated by a 90 degree angle.<BR>
If &#39;sigma&#39; is zero, you get a single pixel on a field of zeros.<BR>
Note that two convolutions with two &quot;Blur&quot; kernels perpendicular to each other, is equivalent to a far larger &quot;Gaussian&quot; kernel with the same sigma value, However it is much faster to apply. This is how the &quot;-blur&quot; operator actually works.<BR>
Comet:{width},{sigma},{angle} Blur in one direction only, much like how a bright object leaves a comet like trail. The Kernel is actually half a gaussian curve, Adding two such blurs in opposite directions produces a Blur Kernel. Angle can be rotated in multiples of 90 degrees.<BR>
Note that the first argument is the width of the kernel and not the radius of the kernel.<BR>
Binomial:[{radius}] Generate a discrete kernel using a 2 dimentional Pascel&#39;s Triangle of values. Used for special forma of image filters.<BR>
<p>See also:<ul>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#2">Constructor(KernelInfo as IMKernelInfo7MBS)</A></li>
<li><A href="imagemagick7-imkernelinfo7mbs-method.html#3">Constructor(kernelString as String)</A></li>
</ul></p>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="5">Scale(scaleFactor as double, GeometryFlags as integer)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Scales the given kernel.<BR>
<B>Notes:</B> 
<BR>
Scales the given kernel list by the given amount, with or without normalization of the sum of the kernel values (as per given flags).<BR>
<BR>
By default (no flags given) the values within the kernel is scaled directly using given scaling factor without change.<BR>
<BR>
If either of the two &#39;normalize_flags&#39; are given the kernel will first be normalized and then further scaled by the scaling factor value given.<BR>
<BR>
Kernel normalization (&#39;normalize_flags&#39; given) is designed to ensure that any use of the kernel scaling factor with &#39;Convolve&#39; or &#39;Correlate&#39; morphology methods will fall into -1.0 to +1.0 range. Note that for non-HDRI versions of IM this may cause images to have any negative results clipped, unless some &#39;bias&#39; is used.<BR>
<BR>
More specifically. Kernels which only contain positive values (such as a &#39;Gaussian&#39; kernel) will be scaled so that those values sum to +1.0, ensuring a 0.0 to +1.0 output range for non-HDRI images.<BR>
<BR>
For Kernels that contain some negative values, (such as &#39;Sharpen&#39; kernels) the kernel will be scaled by the absolute of the sum of kernel values, so that it will generally fall within the +/- 1.0 range.<BR>
<BR>
For kernels whose values sum to zero, (such as &#39;Laplician&#39; kernels) kernel will be scaled by just the sum of the postive values, so that its output range will again fall into the +/- 1.0 range.<BR>
<BR>
For special kernels designed for locating shapes using &#39;Correlate&#39;, (often only containing +1 and -1 values, representing foreground/brackground matching) a special normalization method is provided to scale the positive values separately to those of the negative values, so the kernel will be forced to become a zero-sum kernel better suited to such searches.<BR>
<BR>
WARNING: Correct normalization of the kernel assumes that the &#39;*_range&#39; attributes within the kernel structure have been correctly set during the kernels creation.<BR>
<BR>
NOTE: The values used for &#39;normalize_flags&#39; have been selected specifically to match the use of geometry options, so that &#39;!&#39; means NormalizeValue, &#39;^&#39; means CorrelateNormalizeValue. All other GeometryFlags values are ignored.<BR>
<BR>
scaleFactor: zero. If the kernel is normalized regardless of any flags.<BR>
GeometryFlags: specifically: NormalizeValue, CorrelateNormalizeValue, and/or PercentValue.<BR>
<BR>
See also ScaleKernelInfo in ImageMagick documentation.<BR>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="6">ScaleGeometry(Geometry as string)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Scales using a geometry.<BR>
<B>Notes:</B> 
<BR>
Takes a geometry argument string, typically provided as a &quot;-set option:convolve:scale {geometry}&quot; user setting, and modifies the kernel according to the parsed arguments of that setting.<BR>
<BR>
The first argument (and any normalization flags) are passed to ScaleKernelInfo() to scale/normalize the kernel. The second argument is then passed to UnityAddKernelInfo() to add a scled unity kernel into the scaled/normalized kernel.<BR>
<BR>
geometry: &quot;-set option:convolve:scale {geometry}&quot; setting.<BR>
<BR>
See also ScaleGeometryKernelInfo in ImageMagick documentation.<BR>
</div>
<div class="WLM">
<b><a href="class-imkernelinfo7mbs.html">IMKernelInfo7MBS</a>.<A name="7">UnityAddKernelInfo(scale as double)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-imagemagick7.html" translate="no">ImageMagick7</A></td>
<td class=grau><a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a></td>
<td class=grau><a href="newinversion200.shtml" class=version>20.0</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Adds a given amount of the &#39;Unity&#39; Convolution Kernel to the given pre-scaled and normalized Kernel. <BR>
<B>Notes:</B> 
<BR>
This in effect adds that amount of the original image into the resulting convolution kernel. This value is usually provided by the user as a percentage value in the &#39;convolve:scale&#39; setting.<BR>
<BR>
The resulting effect is to convert the defined kernels into blended soft-blurs, unsharp kernels or into sharpening kernels.<BR>
<BR>
See also UnityAdditionKernelInfo in ImageMagick documentation.<BR>
</div>
<p>The items on this page are in the following plugins: <a href="plugins-mbsgraphicsmagickplugin.html">MBS GraphicsMagick Plugin</a>.</p>
<!-- Ende Content-->

<br>
<div style="width: 200pt; margin: 0pt; padding: 5pt; border-color:#ccc; border-style:solid; background-color: #eee; border-width: 2pt; border-radius: 10pt; " lang="en">
&#128172; <a href="https://www.monkeybreadsoftware.com/feedback/?what=xojo&path=imagemagick7-imkernelinfo7mbs-method">Ask a question or report a problem</a>
</div>

</BODY>
</HTML>

