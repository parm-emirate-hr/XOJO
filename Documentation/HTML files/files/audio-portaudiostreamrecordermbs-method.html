<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Frameset//EN" >
<HTML>
<HEAD>
<TITLE>Monkeybread Xojo plugin - PortAudioStreamRecorderMBS methods</TITLE>
<script src="../platforms.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../help.css" >
<link rel="stylesheet" type="text/css" href="../screen.css" media="screen">
<link rel="stylesheet" type="text/css" href="../print.css" media="print">
<link rel="stylesheet" type="text/css" href="../allitems.css" title="Default">
<link rel="alternate stylesheet" type="text/css" href="../macitems.css" title="Mac">
<link rel="alternate stylesheet" type="text/css" href="../winitems.css" title="Win">
<link rel="alternate stylesheet" type="text/css" href="../linuxitems.css" title="Linux">
<link rel="alternate stylesheet" type="text/css" href="../crossitems.css" title="Crossplatform">
<meta http-equiv="content-type" content="text/html; charset=x-mac-roman">
<META NAME="description" CONTENT="PortAudioStreamRecorderMBS">
</head>
<BODY BGCOLOR="#FFFFFF">
<H2 lang="en">PortAudioStreamRecorderMBS methods</h2>
<p><a href="http://www.monkeybreadsoftware.net">Online Documentation</a> &nbsp; - &nbsp; <a href="stats.html">Statistics</a> &nbsp; - &nbsp; <a href="topic-faq.html">FAQ</a> &nbsp; - &nbsp; <a href="parts.html">Plugin Parts</a> (<a href="partsall.html">All</a>, <a href="plugindeps.html">Dependencies</a>) &nbsp; - &nbsp; <a href="hierarchy.html">Class hierarchy</a></p>
<p>New in Version 
<a href="newinversion213.html">21.3</a> 
<a href="newinversion214.html">21.4</a> 
<a href="newinversion215.html">21.5</a> 
<a href="newinversion220.html">22.0</a> 
<a href="newinversion221.html">22.1</a> 
<a href="newinversion222.html">22.2</a> 
<a href="newinversion223.html">22.3</a> 
<a href="newinversion224.html">22.4</a> 
<a href="newinversion225.html">22.5</a> 
<a href="newinversion230.html">23.0</a> 
<a href="newinversion231.html">23.1</a> 
<a href="newinversion232.html">23.2</a> 
</p>
<p>The list of the &nbsp; <a href="themes.html">topics</a>, 
 &nbsp; <a href="classes.html">classes</a>,
 &nbsp; <a href="interfaces.html">interfaces</a>,
 &nbsp; <a href="controls.html">controls</a>,
 &nbsp; <a href="modules.html">modules</a>,
 &nbsp; <a href="globaltopic.html">global methods by category</a>,
 &nbsp; <a href="globalname.html">global methods by name</a>,
 &nbsp; <a href="screenshots.html">screenshots</a>,
 &nbsp; <a href="licenses.html">licenses</a> &nbsp;
 and &nbsp; <a href="examples.html">examples</a>.</p>
<p id=PlatformChooserMBS>Platforms to show: <a class="isA" href="javascript:all();">All</a> <a class="isM" href="javascript:mac();">Mac</a> <a class="isW" href="javascript:win();">Windows</a> <a class="isL" href="javascript:linux();">Linux</a> <a class="isC" href="javascript:crossplatform();">Cross-Platform</a></p>
<p>Back to <A href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a> class.  </p>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="1">Constructor(BufferSize as Integer)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion91.shtml" class=version>9.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Creates a new object using a buffer of the given size.<BR>
<B>Notes:</B> 
<BR>
The buffer must be a power of 2. For example one Megabyte (2^20). This defines the ring buffer used to buffer samples between data coming from sound device and you call ReadFrames method.<BR>
<BR>
Automatically we take paFloat32 as format for sample buffer.<BR>
<BR>
At 44100 Hz, and 4 bytes per value and 2 channels, you will need 352800 bytes per second on storage.<BR>
</div>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="2">Flush</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion101.shtml" class=version>10.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Clears the buffer and discards all current samples.<BR>
</div>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="3">OpenDefaultStream(numInputChannels as Integer, sampleRate as Double) as Integer</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion91.shtml" class=version>9.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
A simplified version of OpenStream() that opens the default input devices.<BR>
<B>Notes:</B> 
<BR>
Sampleformat is always 32bit float in this class. (use memoryblock.singlevalue)<BR>
<BR>
numInputChannels: The number of channels of sound to be delivered. It can range from 1 to the value of maxInputChannels in the <A href="class-portaudiodeviceinfombs.html">PortAudioDeviceInfoMBS</A> object for the default output device. If 0 the stream is opened as an output-only stream.<BR>
<BR>
sampleRate: Same as OpenStream parameter of the same name.<BR>
<BR>
Returns an error code.<BR>
Error -2 is from the plugin and reports that the buffer was not created before.<BR>
</div>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="4">OpenStream(inputParameters as <A href="class-portaudiostreamparametersmbs.html">PortAudioStreamParametersMBS</A>, sampleRate as Double, framesPerBuffer as Integer, streamFlags as Integer) as Integer</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion91.shtml" class=version>9.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Opens a stream for input.<BR>
<B>Notes:</B> 
<BR>
Sampleformat is always 32bit float in this class.  (use memoryblock.singlevalue)<BR>
<BR>
outputParameters: A object that describes the input parameters used by the opened stream. See <A href="class-portaudiostreamparametersmbs.html">PortAudioStreamParametersMBS</A> for a description of these parameters.<BR>
<BR>
sampleRate: The desired sampleRate. <BR>
     <BR>
framesPerBuffer: The number of frames passed to the stream callback function, or the preferred block granularity for a blocking read/write stream. The special value paFramesPerBufferUnspecified (0) may be used to request that the stream callback will recieve an optimal (and possibly varying) number of frames based on host requirements and the requested latency settings.<BR>
Note: With some host APIs, the use of non-zero framesPerBuffer for a callback stream may introduce an additional layer of buffering which could introduce additional latency. PortAudio guarantees that the additional latency will be kept to the theoretical minimum however, it is strongly recommended that a non-zero framesPerBuffer value only be used when your algorithm requires a fixed number of frames per stream callback.<BR>
<BR>
const paFramesPerBufferUnspecified=0<BR>
<BR>
streamFlags: Flags which modify the behaviour of the streaming process. This parameter may contain a combination of flags ORed together. Some flags may only be relevant to certain buffer formats.<BR>
     <BR>
<TABLE cellpadding=3 border=0>
<TR><TD valign="top">const paNoFlag</TD><TD valign="top">= 0</TD><TD valign="top">no flags</TD></TR>
<TR><TD valign="top">const paClipOff</TD><TD valign="top">= 1</TD><TD valign="top">Disable default clipping of out of range samples.</TD></TR>
<TR><TD valign="top">const paDitherOff</TD><TD valign="top">= 2</TD><TD valign="top">Flag requests that where possible a full duplex stream will not discard overflowed input samples without calling the stream callback. This flag is only valid for full duplex callback streams and only when used in combination with the paFramesPerBufferUnspecified (0) framesPerBuffer parameter. Using this flag incorrectly results in a paInvalidFlag error being returned from OpenStream and OpenDefaultStream.</TD></TR>
<TR><TD valign="top">const paNeverDropInput</TD><TD valign="top">= 4</TD><TD valign="top">Call the stream callback to fill initial output buffers, rather than the default behavior of priming the buffers with zeros (silence). This flag has no effect for input-only and blocking read/write streams.</TD></TR>
<TR><TD valign="top">const paPrimeOutputBuffersUsingStreamCallback</TD><TD valign="top">= 8</TD><TD valign="top">Call the stream callback to fill initial output buffers, rather than the default behavior of priming the buffers with zeros (silence). This flag has no effect for input-only and blocking read/write streams.</TD></TR>
</TABLE>
<BR>
Upon success OpenStream() returns paNoError and places a pointer to a valid PaStream in the stream argument. The stream is inactive (stopped).<BR>
If a call to OpenStream() fails, a non-zero error code is returned (see PaError for possible error codes) and the value of stream is invalid.<BR>
<BR>
Error -2 is from the plugin and reports that the buffer was not created before.<BR>
</div>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="5">ReadFrames(mem as memoryblock, SizeInBytes as Integer) as Integer</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion91.shtml" class=version>9.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Reads frames into the memoryblock.<BR>
<B>Example:</B> 
<div class=CodeExample translate="no">
<pre>
<span style="color: #000000;"><span style="color: #0000FF;">dim</span> s <span style="color: #0000FF;">as</span> <A href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</A><br /><span style="color: #0000FF;">dim</span> m <span style="color: #0000FF;">as</span> memoryblock<br /><br />m=newmemoryblock(<span style="color: #336698;">1024</span>*<span style="color: #336698;">1024</span>)<br /><span style="color: #800000;">// initialize</span><br /><br /><span style="color: #0000FF;">dim</span> frames <span style="color: #0000FF;">as</span> <span style="color: #0000FF;">Integer</span><br /><br />frames=s.ReadFrames(m,m.size)<br /><br />msgbox <span style="color: #6600FE;">&quot;we got &quot;</span>+str(frames)+<span style="color: #6600FE;">&quot; frames.&quot;</span></span>
</pre>
</div>
<B>Notes:</B> 
<BR>
You pass a memoryblock and the size of this memoryblock in bytes.<BR>
Values are stored in floats (memoryblock.singlevalue) so you get at maximum SizeInBytes/4 values. And if you use more than one channel, you will receive them interlaced.<BR>
<BR>
ReadFrames uses a mutex to access share data, so this call is expensive. Use a big buffer.<BR>
<h4>Some examples using this method:</h4>
<ul translate="no">
<li><A href="example-audio-portaudio.html">/Audio/PortAudio</A></li>
<li><A href="example-audio-portaudiorecordandplay.html">/Audio/PortAudio Record and Play</A></li>
<li><A href="example-audio-portaudiostreamingsender.html">/Audio/PortAudio Streaming Sender</A></li>
<li><A href="example-tools-ltc-listenfortimecode.html">/Tools/LTC/Listen for TimeCode</A></li>
</ul>
</div>
<div class="WLM">
<b><a href="class-portaudiostreamrecordermbs.html">PortAudioStreamRecorderMBS</a>.<A name="6">ResizeBuffer(BufferSize as Integer)</A></b><br>

<table cellpadding=3>
<tr>
<td class=grau>Type</td>
<td class=grau>Topic</td>
<td class=grau>Plugin</td>
<td class=grau>Version</td>
<td class=grau>macOS</td>
<td class=grau>Windows</td>
<td class=grau>Linux</td>
<td class=grau>iOS</td>
<td class=grau>Targets</td>
</tr>
<tr>
<td class=grau>method</td>
<td class=grau><A href="topic-audio.html" translate="no">Audio</A></td>
<td class=grau><a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a></td>
<td class=grau><a href="newinversion91.shtml" class=version>9.1</a></td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#9989; Yes</td>
<td class=grau>&#10060; No</td>
<td class=grau>All</td>
</tr>
</table>
<B>Function:</B> 
Resizes the buffer.<BR>
<B>Notes:</B> 
<BR>
Do not resize while you are recording (this can crash).<BR>
<BR>
The buffer must be a power of 2. For example one Megabyte (2^20).<BR>
<BR>
At 44100 Hz, and 4 bytes per value and 2 channels, you will need 352800 bytes per second on storage.<BR>
</div>
<p>The items on this page are in the following plugins: <a href="plugins-mbsaudioplugin.html">MBS Audio Plugin</a>.</p>
<!-- Ende Content-->

<br>
<div style="width: 200pt; margin: 0pt; padding: 5pt; border-color:#ccc; border-style:solid; background-color: #eee; border-width: 2pt; border-radius: 10pt; " lang="en">
&#128172; <a href="https://www.monkeybreadsoftware.com/feedback/?what=xojo&path=audio-portaudiostreamrecordermbs-method">Ask a question or report a problem</a>
</div>

</BODY>
</HTML>

